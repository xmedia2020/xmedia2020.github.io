<!DOCTYPE html>
<html lang="it">
    <head>
        <meta charset="utf-8">
        <title>abc</title>
        <meta name="description"                           content="Abecedario interattivo">
        <meta name="author"                                content="SUPSI CV 2020">
        <meta name="viewport"                              content="width=device-width, initial-scale=1">
        <meta name="mobile-web-app-capable"                content="yes">
        <meta name="apple-mobile-web-app-capable"          content="yes">
        <meta name="theme-color"                           content="black"> <!-- Chrome, Firefox OS and Opera -->
        <meta name="msapplication-navbutton-color"         content="black"> <!-- Windows Phone -->
        <meta name="apple-mobile-web-app-status-bar-style" content="black"> <!-- iOS Safari -->
        <link rel="apple-touch-icon" sizes="192x192" href="icons/icon_192.png">
        <link rel="shortcut icon"    sizes="32x32"   href="icons/icon_32.png">
        <style type="text/css" media="screen">
            body {
                margin:0;
                padding:0;
                overflow: hidden;
                font-family: Helvetica;
            }
            #index_list {
                font-size: 0.5rem;
                background-color: red;
                position: absolute;
                bottom: 1rem;
                right: 1rem;
                padding: 0.5rem 2.5rem 1rem 1.5rem;
            }
            #index_list ul {
                margin:0;
                padding:0;
                list-style: none;
            }
            #index_list li{
                cursor:pointer;
                margin-left:-0.5rem;
            }
            #index_list li:hover{
                text-decoration: underline;
            }
            #index_list li:before{
                display:inline-block;
                content:"– ";
                width:0.5rem;
            }
            #index_list .close{
                position: absolute;
                right:0.5rem;
                top:0.5rem;
                display: block;
                cursor:pointer;
            }
            #index_list .close:hover{
                opacity:0.2;
            }


            iframe {
                position: absolute;
                left: 0;
                top: 0;
                height: 100vh;
                width: 100vw;
                display: block;
                border: none;
            }
        </style>
    </head>
    <body>
        <iframe></iframe>
        <div id="index_list">
            <span>Indice alt.:</span>
            <span class="close">✕</span>
            <ul>
            </ul>
        </div>
    </body>
    <script>

        const indici = [
            "index_AGY_1.html",
            "index_AGY_2.html",
            "index_ARI.html",
            "index_CCR.html",
            "index_DVE.html",
            "index_LBA.html",
            "index_MDE.html",
        ]

        const current_index = localStorage.getItem("selected_index") || 0

        const target = document.querySelector("#index_list ul")
        indici.forEach((e, idx) => {
            const label = e.substring(6).replace(/\.[^/.]+$/, "")
            const li = document.createElement("li")
            li.innerHTML = label
            target.appendChild(li)
            li.addEventListener('click', e => {
                localStorage.setItem("selected_index", idx)
                window.location.reload()
            })
        })

        document.querySelector(".close").addEventListener("click", e => {
            document.querySelector("#index_list").style.display = "none"
        })

        document.querySelector("iframe").src = indici[current_index]
    </script>
</html>
